<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>🔥 Diavolo's Eternal Suffering 🔥</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    @keyframes shake {
      0% { transform: translate(0px, 0px) rotate(0deg); }
      25% { transform: translate(3px, -2px) rotate(1deg); }
      50% { transform: translate(-3px, 3px) rotate(-1deg); }
      75% { transform: translate(2px, -1px) rotate(1deg); }
      100% { transform: translate(0px, 0px) rotate(0deg); }
    }
    @keyframes glitch {
      0% { filter: hue-rotate(0deg); }
      50% { filter: hue-rotate(180deg) saturate(5); }
      100% { filter: hue-rotate(360deg); }
    }
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      text-align: center;
      padding: 2rem;
      animation: glitch 10s infinite;
      background: black;
      color: #ff69b4;
    }
    .counter-box {
      background: rgba(0, 0, 0, 0.8);
      border: 5px dashed #ff0000;
      border-radius: 1rem;
      padding: 2rem;
      box-shadow: 0 0 40px #ff0000, 0 0 80px #ff00ff;
      animation: shake 0.3s infinite;
    }
    .death-log {
      font-style: italic;
      font-weight: bold;
      color: #00ffff;
      text-shadow: 0 0 10px #ff00ff;
      font-size: 1.3rem;
    }
    .jojo-text {
      font-size: 2.5rem;
      color: #ff0000;
      font-weight: 900;
      animation: shake 0.2s infinite;
    }
    .bg-random {
      transition: background 1s;
    }
    .full-chaos * {
      animation: shake 0.15s infinite !important;
    }
    #screenshot-btn {
      margin-top: 2rem;
      background-color: #facc15;
      color: black;
      padding: 0.6rem 1.2rem;
      border-radius: 1rem;
      font-weight: bold;
      box-shadow: 0 0 15px #facc15;
      transition: transform 0.2s ease;
    }
    #screenshot-btn:hover {
      transform: scale(1.1);
    }
    #gif-box {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 160px;
      height: 160px;
      z-index: 9999;
      overflow: hidden;
      border-radius: 1rem;
      box-shadow: 0 0 20px magenta;
    }
    #gif-box img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  </style>
</head>
<body class="bg-random">
  <h1 class="text-5xl font-black mb-4 text-purple-500 uppercase tracking-widest">💀 Diavolo Death Counter 💀</h1>
  <div class="counter-box max-w-xl mx-auto">
    <p class="text-lg uppercase">GER Triggered: <strong>Nov 16, 2022 00:00:00 UTC</strong></p>
    <p class="jojo-text mt-6">Total DEATHS: <span id="death-count">∞</span></p>
    <p class="text-2xl mt-4 text-yellow-300">Next DEMISE in: <span id="next-death">0s</span></p>
    <p class="death-log mt-6" id="death-description" title="Stand responsible: ???">PREPARE TO SUFFER</p>
    <button id="screenshot-btn">📸 Capture Death</button>
  </div>

  <div id="gif-box"><img src="" alt="JoJo GIF" /></div>

  <script>
    const TENOR_API_KEY = "LIVDSRZULELA"; // demo key
    const GER_START_TIME = new Date('2022-11-16T00:00:00Z').getTime();
    let interval = 30000;
    let lastDeathIndex = -1;

    const COLORS = ['#111827', '#1f2937', '#3b0764', '#4a044e', '#0f172a', '#7f1d1d', '#0c0a09'];
    const emojis = ["💀", "🔥", "😱", "🤣", "🧠", "🌪️", "🤯", "⚡", "🚬", "🔪"];
    const stands = [
      "Gold Experience Requiem", "Dirty Deeds Done Dirt Cheap", "Sticky Fingers",
      "King Crimson", "Made in Heaven", "The Hand", "Stone Free", "Tusk Act 4", "Heaven’s Door"
    ];
    const verbs = [
      "was vaporized", "was consumed", "was obliterated", "got shredded", "was dismembered", "was rejected",
      "was deleted", "got folded", "was exploded", "was absorbed", "was violated", "was outplayed", "was gaslit"
    ];
    const sources = [
      "GER", "Star Platinum", "King Crimson", "a toaster", "the IRS", "DIO’s diary",
      "a rogue Stand user", "Jotaro’s hat", "Jonathan’s ghost", "a cursed tweet", "a rat with a gun",
      "Shigechi’s lunchbox", "Killer Queen’s bubbles", "MIH going brrrr"
    ];
    const actions = [
      "screaming about fate", "denying his future", "flexing in a mirror", "trying to monologue", "begging for death",
      "sipping espresso", "chasing Giorno", "questioning reality", "looking for the Arrow", "blaming Fugo"
    ];
    const locations = [
      "in an alley", "inside a flashback", "at Morioh’s gym", "on a subway", "inside D4C",
      "during a requiem dream", "in Pucci's chapel", "in a time loop", "on Twitter", "in a bootleg JoJo DVD"
    ];

    function random(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function generateRecursiveDeath(depth = 3) {
      let lines = [];
      for (let i = 0; i < depth; i++) {
        const verb = random(verbs);
        const source = random(sources);
        const action = random(actions);
        const location = random(locations);
        lines.push(`Diavolo ${verb} by ${source} while ${action} ${location}`);
      }
      return lines.join('... Then he ') + " " + random(emojis);
    }

    function chaosBackground() {
      document.body.style.background = random(COLORS);
    }

    function fetchJojoGIF() {
  fetch(`https://g.tenor.com/v1/random?q=jojo&key=LIVDSRZULELA&limit=1`)
    .then(res => res.json())
    .then(data => {
      if (data.results && data.results.length > 0) {
        const gifUrl = data.results[0].media[0].gif.url;
        document.querySelector("#gif-box img").src = gifUrl;
      }
    })
    .catch(err => {
      console.error("GIF fetch failed:", err);
      document.querySelector("#gif-box img").src = "https://media.tenor.com/fallback.gif";
    });
}


    let lastDeathText = "PREPARE TO SUFFER";

    function update() {
      const now = Date.now();
      const elapsed = now - GER_START_TIME;
      const deaths = Math.floor(elapsed / interval);
      const next = interval - (elapsed % interval);

      document.getElementById("death-count").textContent = deaths.toLocaleString();
      document.getElementById("next-death").textContent = `${Math.floor(next / 1000)}s`;

      if (deaths !== lastDeathIndex) {
        lastDeathText = generateRecursiveDeath();
        lastDeathIndex = deaths;
        document.getElementById("death-description").textContent = "LATEST: " + lastDeathText;
        document.getElementById("death-description").title = "Stand responsible: " + random(stands);
        chaosBackground();
        fetchJojoGIF();

        if (deaths % 1000 === 0 && deaths !== 0) {
          alert("Why... can't I die...?");
        }
      }
    }

    update();
    setInterval(update, 1000);

    document.addEventListener("keydown", e => {
      if (e.key === "H") {
        interval = 5000;
        console.log("HELL MODE ENABLED");
      }
      if (e.key === "C") {
        document.body.classList.toggle("full-chaos");
        console.log("FULL CHAOS TOGGLED");
      }
    });

    document.getElementById("screenshot-btn").addEventListener("click", () => {
      html2canvas(document.body).then(canvas => {
        const link = document.createElement('a');
        link.download = 'diavolo_death.png';
        link.href = canvas.toDataURL();
        link.click();
      });
    });
  </script>
</body>
</html>
